---
title: Inclusion
description: Learn how to configure what is included in the sitemap.
sidebar:
  order: 3
  badge:
    text: Updated
    variant: tip
sitemap:
  pageTitle: Sitemap Inclusion Config
---

import { Badge, FileTree, Tabs, TabItem } from '@astrojs/starlight/components';

This page details configuration options for changing what is included in the sitemap.

## Content Root

The `contentRoot` option specifies from which directory files should be parsed to generate the sitemap.
By default, this is set to Astro's `srcDir` + `/content/docs` for Starlight (i.e. `./src/content/docs`),
and  `srcDir` + `/pages` for vanilla Astro sites (i.e. `./src/pages`).

Normally, you should not have to change this setting, as this will have an effect on how the paths of pages are constructed.

**Example:**

<Tabs>
	<TabItem label="./src/content/docs" icon="seti:happenings">
		<FileTree>
			- src
				- content
					- **docs**
						- **private** These files _are_ included in the sitemap
							- **basic-secretive-page.md**
							- **reactive-hidden-page.mdx**
							- **yet-another-special-page.mdoc**
							- **astronomically-exclusive.astro**
							- **...**
						- **public** These files _are_ included in the sitemap
							- **index.md**
							- **about.mdx**
							- **contact.mdoc**
							- **faq.astro**
							- **...**
		</FileTree>
	</TabItem>
	<TabItem label="./src/content/docs/public" icon="list-format">
		<FileTree>
			- src
				- content
					- docs
						- private These files _are not_ included in the sitemap
							- basic-secretive-page.md
							- reactive-hidden-page.mdx
							- yet-another-special-page.mdoc
							- astronomically-exclusive.astro
							- ...
						- **public** These files _are_ included in the sitemap
							- **index.md**
							- **about.mdx**
							- **contact.mdoc**
							- **faq.astro**
							- **...**
		</FileTree>
	</TabItem>
</Tabs>

:::danger[Warning]
The choice of `contentRoot` will determine how the path of a page is constructed.
In the example above, setting the `contentRoot` to `./src/content/docs` will result in pages having paths such as `/private/basic-secretive-page` and `/public/index`.
Setting the `contentRoot` to `./src/content/docs/public` will result in pages having paths such as `/index` and `/about`.
:::

## Page Inclusion Rules

The `pageInclusionRules` option allows you to specify which pages should be included in the sitemap based on their _file path_ (relative to the `contentRoot`).
The rules are specified as a list of strings, where each string is a [glob pattern](/starlight-site-graph/concepts/globs).
The first rule that was matched, determines whether the page is included or not.

If the inclusion of a page was specified in its frontmatter, it will take precedence over the rules specified here.

:::note[Note]
This setting will apply to both Markdown files which are parsed pre-build, and HTML files generated during the build.
If you, for example, use `["**/*.md"]` as your inclusion rules, any extra links that can only be found in
the generated HTML (e.g. statically generated links from Astro components) will not be included in the sitemap.

In contrast, `["**/*.html"]` is equivalent to `["**/*"]`, as the HTML content will always contain all links from the Markdown files.
:::

<Tabs>
	<TabItem label='["**/*"]'>
		All files are included in the sitemap.
		<FileTree>
			- src
				- content
					- docs
						- private
							- **basic-secretive-page.md**
							- **reactive-hidden-page.mdx**
							- **yet-another-special-page.mdoc**
							- **astronomically-exclusive.astro**
							- **...**
						- public
							- **index.md**
							- **about.mdx**
							- **contact.mdoc**
							- **faq.astro**
							- **...**
		</FileTree>
	</TabItem>
	<TabItem label='["**/*.md"]'>
		Only normal markdown files are included in the sitemap.
		<FileTree>
			- src
				- content
					- docs
						- private
							- **basic-secretive-page.md**
							- reactive-hidden-page.mdx
							- yet-another-special-page.mdoc
							- astronomically-exclusive.astro
							- ...
						- public
							- **index.md**
							- about.mdx
							- contact.mdoc
							- faq.astro
							- ...
		</FileTree>
	</TabItem>
	<TabItem label='["/public/**"]'>
		Only files in the `public` directory are included.
		<FileTree>
			- src
				- content
					- docs
						- private
							- basic-secretive-page.md
							- reactive-hidden-page.mdx
							- yet-another-special-page.mdoc
							- astronomically-exclusive.astro
							- ...
						- public
							- **index.md**
							- **about.mdx**
							- **contact.mdoc**
							- **faq.astro**
							- **...**
		</FileTree>
	</TabItem>
	<TabItem label='["!**/*", "**/*"]'>
		No files are included, because the first rule is always matched first.
		<FileTree>
			- src
				- content
					- docs
						- private
							- basic-secretive-page.md
							- reactive-hidden-page.mdx
							- yet-another-special-page.mdoc
							- astronomically-exclusive.astro
							- ...
						- public
							- index.md
							- about.mdx
							- contact.mdoc
							- faq.astro
							- ...
		</FileTree>
	</TabItem>
	<TabItem label='["!**/*.mdoc", "**/*"]'>
		Only files that are not `.mdoc` files are included.
		<FileTree>
			- src
				- content
					- docs
						- private
							- **basic-secretive-page.md**
							- **reactive-hidden-page.mdx**
							- yet-another-special-page.mdoc
							- **astronomically-exclusive.astro**
							- ...
						- public
							- **index.md**
							- **about.mdx**
							- contact.mdoc
							- **faq.astro**
							- ...
		</FileTree>
	</TabItem>
</Tabs>

## <Badge text="New" variant="caution" size="large" /> Ignore Links in Selectors

The `ignoreLinksInSelectors` option allows you to specify CSS-like selectors to ignore links that are contained
within HTML elements that match the selector.
This is useful if you want to ignore links in specific parts of your pages, such as the header, footer, or sidebar.

The possible types of selectors are:
- Tag selectors (e.g. `header`, `footer`, `nav`, `aside`, etc.)
- Class selectors (e.g. `.class-name`)
- ID selectors (e.g. `#id-name`)

A selector may _only_ consist of a single tag, class, or ID - complex selectors (e.g. `header nav`, `.class1.class2`, `#id1 #id2`, etc.) are not supported.

If a link (`<a>` element in the generated HTML) is contained within an element that matches _any_ of the specified selectors,
it will be ignored and not included in the final sitemap.

By default, this setting is set to `['header', 'footer', 'nav', '.right-sidebar', '.site-title']`,
which will result in all common Starlight links being ignored (i.e. table of contents, edit link, social links, pagination links, etc.).

<Tabs>
	<TabItem label='[]'>
		All links are included.

		```html ins="/link1" ins="/link2" ins="/link3" ins="/link4"
		<header>
			<nav>
				<a href="/link1">Header Link</a>
			</nav>
		</header>
		<main>
			<raw>
				Lorem ipsum dolor sit <a href="/link2">amet</a>.
			</raw>
			<aside class="right-sidebar">
				<a href="/link3">Sidebar Link</a>
			</aside>
		</main>
		<div id="footer">
			<a href="/link4">Footer Link</a>
		</div>
		```
	</TabItem>
	<TabItem label='["header", "raw"]'>
		Links in the `<header>` and `<raw>` elements are ignored.

		```html ins="/link3" ins="/link4" del=/<.?header>/ del=/<.?raw>/ mark=//link1/ mark=//link2/
		<header>
			<nav>
				<a href="/link1">Header Link</a>
			</nav>
		</header>
		<main>
			<raw>
				Lorem ipsum dolor sit <a href="/link2">amet</a>.
			</raw>
			<aside class="right-sidebar">
				<a href="/link3">Sidebar Link</a>
			</aside>
		</main>
		<div id="footer">
			<a href="/link4">Footer Link</a>
		</div>
		```
	</TabItem>
	<TabItem label='[".right-sidebar"]'>
		Links in elements with `<xyz class="right-sidebar">` are ignored.

		```html ins="/link1" ins="/link2" ins="/link4" del=/<.?aside.*>/ mark=//link3/
		<header>
			<nav>
				<a href="/link1">Header Link</a>
			</nav>
		</header>
		<main>
			<raw>
				Lorem ipsum dolor sit <a href="/link2">amet</a>.
			</raw>
			<aside class="right-sidebar">
				<a href="/link3">Sidebar Link</a>
			</aside>
		</main>
		<div id="footer">
			<a href="/link4">Footer Link</a>
		</div>
		```
	</TabItem>
	<TabItem label='["#footer"]'>
		Links in elements with `<xyz id="footer">` are ignored.

		```html ins="/link1" ins="/link2" ins="/link3" del=/<.?div.*>/ mark=//link4/
		<header>
			<nav>
				<a href="/link1">Header Link</a>
			</nav>
		</header>
		<main>
			<raw>
				Lorem ipsum dolor sit <a href="/link2">amet</a>.
			</raw>
			<aside class="right-sidebar">
				<a href="/link3">Sidebar Link</a>
			</aside>
		</main>
		<div id="footer">
			<a href="/link4">Footer Link</a>
		</div>
		```
	</TabItem>
</Tabs>

## <Badge text="Deprecated" variant="danger" size="large" /> <strike>Ignore Starlight Links</strike>

:::danger[Deprecated]
This option is deprecated and will be removed in a future version.
Please use the [`ignoreLinksInSelectors`](#-ignore-links-in-selectors) option to achieve the same effect.
:::

By default, Starlight adds additional links to every page, such as the "Edit this page", "Built with Starlight",
and icons links. Since this is not necessarily useful (meaningful) for the graph, as it will
clutter pages together, you can choose to ignore these types of links via the `ignoreStarlightLinks` option -
this setting is `true` by default.

Here are all the types of links that are ignored:
- `Edit this page` (created by `editLink: { 'baseUrl': '...' }`)
- `Built with Starlight` (created by `credits: true`)
- Social links (created by `social: { ... }`)
- Pagination links connecting previous and next pages (created by `pagination: true`)
- Links to the landing page/root page (always added for title)

These ignores are added as part of the [`linkInclusionRules`](#link-inclusion-rules) configuration.
If you want to override the behaviour (i.e. keep a link that would otherwise be ignored),
you can do so by specifying the link as a positive rule in the `linkInclusionRules` configuration
(without a `!` prefix).

As an example, specifying `linkInclusionRules: ["https://starlight.astro.build", "**/*"]` will result in the
credits link _not_ being ignored.

:::note[Note]
Links in the Starlight sidebar are always ignored by default, otherwise every page would be connected to every other page.
:::

Finally, if you are not using Starlight, this setting will have no effect.



## Link Inclusion Rules

The `linkInclusionRules` option allows you to specify which links should be included in the sitemap based on their _target path_.
The rules are specified as a list of strings, where each string is a [glob pattern](/starlight-site-graph/concepts/globs).
The first rule that was matched, determines whether the link is included or not.

If a link was specified in the frontmatter of a page, it will always be included, regardless of the rules specified here.

<Tabs>
	<TabItem label='["**/*"]'>
		All links are matched.

		```md ins="[links](/link)" ins="[another link here](/here/another/link)" ins="[Astro](https://astro.build)" ins="[nowhere](https://no.w/here/)"
		// a-linked-document.md
		This document contains many [links](/link) to other pages.
		Here is one that goes to [another link here](/here/another/link).
		This one goes to [Astro](https://astro.build).
		And this one goes [nowhere](https://no.w/here/).
		```
	</TabItem>
	<TabItem label='["**/link"]'>
		Only links that end in `/link` are matched.

		```md ins="[links](/link)" ins="[another link here](/here/another/link)"
		// a-linked-document.md
		This document contains many [links](/link) to other pages.
		Here is one that goes to [another link here](/here/another/link).
		This one goes to [Astro](https://astro.build).
		And this one goes [nowhere](https://no.w/here/).
		```
	</TabItem>
	<TabItem label='["**/here/**"]'>
		Only links to the `here` subdirectory are matched.

		```md ins="[another link here](/here/another/link)" ins="[nowhere](https://no.w/here/)"
		// a-linked-document.md
		This document contains many [links](/link) to other pages.
		Here is one that goes to [another link here](/here/another/link).
		This one goes to [Astro](https://astro.build).
		And this one goes [nowhere](https://no.w/here/).
		```
	</TabItem>
	<TabItem label='["!https://**/*", "**/*"]'>
		Only links that are not external are matched.
		Though this is technically equivalent to [`includeExternalLinks: false`](/starlight-site-graph/configuration/sitemap/inclusion/#include-external-links),
		this rule would not be able to override the behaviour specified by `includeExternalLinks`.

		```md ins="[links](/link)" ins="[another link here](/here/another/link)"
		// a-linked-document.md
		This document contains many [links](/link) to other pages.
		Here is one that goes to [another link here](/here/another/link).
		This one goes to [Astro](https://astro.build).
		And this one goes [nowhere](https://no.w/here/).
		```
	</TabItem>
</Tabs>

## Include External Links

The `includeExternalLinks` option toggles whether external links will be included in the sitemap.

<Tabs>
	<TabItem label="True" icon="approve-check">
		```md ins="[a boring page](/another-page)" ins="[Starlight](https://starlight.astro.build)"
		// a-cool-document.md
		This is a *cool* document
			which links to [a boring page](/another-page).
		Because I am a **very cool** document,
			I will also link to [Starlight](https://starlight.astro.build).
		```
	</TabItem>
	<TabItem label="False" icon="close">
		```md ins="[a boring page](/another-page)"
		// a-cool-document.md
		This is a *cool* document
			which links to [a boring page](/another-page).
		Because I am a **very cool** document,
			I will also link to [Starlight](https://starlight.astro.build).
		```
	</TabItem>
</Tabs>

