@layer sitegraph {
	:root {
		--slsg-graph-width: 250px;
		--slsg-graph-height: 250px;

		--slsg-text-lg: 1.125rem;
		--slsg-text-md: 1rem;
		--slsg-text-sm: 0.875rem;
		--slsg-text-xs: 0.8125rem;
	}

	:root, :root[data-theme='dark'] {
		--slsg-graph-bg-color: var(--slsg-graph-minimized-bg-color);
		--slsg-graph-minimized-bg-color: #1e1e1e;
		--slsg-graph-maximized-bg-color: #252526;
		--slsg-graph-outline-color: #3c3c3c;

		--slsg-graph-action-color: #f2f2f2;
		--slsg-graph-action-color-hover: inherit;
		--slsg-graph-action-bg-color-hover: #2d2d2d;

		--slsg-context-menu-border-color: #3c3c3c;
		--slsg-context-menu-bg-color: #3c3c3c;
		--slsg-context-menu-bg-color-hover: #2d2d2d;

		--slsg-text-color: #f2f2f2;
		--slsg-text-color-accent: #359de3;
		--slsg-text-color-muted: #5a5a5a;


		--slsg-color-accent: #007acc;
		--slsg-color-muted: #5a5a5a;

		--slsg-link-color: #3c3c3c;

		--slsg-node-color: #ffffff;
		--slsg-node-color-adjacent: #d4d4d4;
		--slsg-node-color-current: #3eb63e;
		--slsg-node-color-visited: #9c9c9c;
		--slsg-node-color-unresolved: #ea4040;
		--slsg-node-color-external: #b138b1;
		--slsg-node-color-tag: #c3a6ff;
		--slsg-node-color-1: #ff7d82;
		--slsg-node-color-2: #ffb07a;
		--slsg-node-color-3: #ffd66f;
		--slsg-node-color-4: #dee169;
		--slsg-node-color-5: #a6e75c;
		--slsg-node-color-6: #76bf93;
		--slsg-node-color-7: #4e9cdf;
		--slsg-node-color-8: #6a86d1;
		--slsg-node-color-9: #a287ca;
	}

	:root[data-theme='light'] {
		--slsg-graph-minimized-bg-color: #f2f2f2;
		--slsg-graph-maximized-bg-color: #f3f3f3;
		--slsg-graph-outline-color: #cccccc;

		--slsg-graph-action-color: #222222;
		--slsg-graph-action-bg-color-hover: #e0e0e0;

		--slsg-context-menu-border-color: #cccccc;
		--slsg-context-menu-bg-color: #f3f3f3;
		--slsg-context-menu-bg-color-hover: #e0e0e0;

		--slsg-text-color: #222222;
		--slsg-text-color-accent: #007acc;
		--slsg-text-color-muted: #5a5a5a;

		--slsg-color-accent: #007acc;
		--slsg-color-muted: #5a5a5a;

		--slsg-link-color: #cccccc;

		--slsg-node-color: #222222;
		--slsg-node-color-adjacent: #d4d4d4;
		--slsg-node-color-current: #5eaa5e;
		--slsg-node-color-visited: #404040;
		--slsg-node-color-unresolved: #af3737;
		--slsg-node-color-external: #b16db1;
		--slsg-node-color-tag: #a17bf8;
		--slsg-node-color-1: #ff595e;
		--slsg-node-color-2: #ff924c;
		--slsg-node-color-3: #ffca3a;
		--slsg-node-color-4: #c5ca30;
		--slsg-node-color-5: #8ac926;
		--slsg-node-color-6: #52a675;
		--slsg-node-color-7: #1982c4;
		--slsg-node-color-8: #4267ac;
		--slsg-node-color-9: #7d5ba6;
	}

	/* Ensures that override on specific element will still inherit proper accent/muted colors */
	.slsg-graph-component {
		--slsg-node-color-hover: var(--slsg-color-accent);
		--slsg-node-color-muted: var(--slsg-color-muted);

		--slsg-link-color-hover: var(--slsg-color-accent);
		--slsg-link-color-muted: var(--slsg-color-muted);

		--slsg-label-color: var(--slsg-text-color);
		--slsg-label-color-hover: var(--slsg-text-color-accent);
		--slsg-label-color-muted: var(--slsg-text-color-muted);
	}

	/* =================================== Graph Container Styling ============================================== */
	.slsg-graph-component {
		width: var(--slsg-graph-width);
		height: var(--slsg-graph-height);
	}

	.slsg-graph-container {
		position: relative;
		width: var(--slsg-graph-width);
		height: inherit;

		box-sizing: border-box;

		border-radius: 5px;
		background-color: var(--slsg-graph-bg-color);
		outline: 1px solid var(--slsg-graph-outline-color);

		canvas {
			width: inherit;
			height: inherit;
			border-radius: inherit;
		}
	}

	/* ========================================================================================================= */
	/* ====================================== Graph Stats Styling ============================================== */
	#slsg-graph-stats {
		position: fixed;
		bottom: 40px;
		right: 10px;
		z-index: 500;
		width: max(200px, 15vw, 15vh);
		height: max(100px, 6vh, 6vw);
		opacity: 0.6;
		user-select: none;
		cursor: pointer;
	}

	/* ========================================================================================================= */
	/* ====================================== Fullscreen Styling =============================================== */
	body[data-graph-blur='true'] {
		#starlight__sidebar {
			z-index: 0;
		}

		.header {
			z-index: 0;
		}

		.right-sidebar:not(:has(.slsg-is-fullscreen)) {
			z-index: 0;
		}
	}

	.slsg-background-blur {
		position: fixed;
		top: 0;
		left: 0;

		backdrop-filter: blur(4px);
		width: 100%;
		height: 100%;

		z-index: 10;
	}

	.slsg-is-fullscreen {
		--slsg-graph-bg-color: var(--slsg-graph-maximized-bg-color);

		position: fixed;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);
		z-index: 1000;

		outline: unset;

		height: 60vh;
		width: 50vw;

		.slsg-graph-action-container svg {
			width: 24px;
			height: 24px;
		}
	}

	@media (max-width: 1152px) {
		.slsg-is-fullscreen {
			height: 80vh;
			width: 80vw;
		}
	}

	/* ========================================================================================================== */
	/* ====================================== Graph Action Styles =============================================== */
	.slsg-graph-action-container:not(:empty) {
		position: absolute;
		right: 0;

		display: flex;
		flex-direction: row;
		gap: 0.2rem;
		padding: 0.2rem 0.2rem 0.4rem 0.5rem;

		background-color: color-mix(in srgb, var(--slsg-graph-bg-color) 80%, transparent);
		border-radius: 0 0 0 16px;
		backdrop-filter: blur(4px);
	}

	.slsg-graph-action-button.slsg-graph-action-button {
		display: flex;

		color: var(--slsg-graph-action-color);
		background-color: transparent;
		transition: background-color 0.3s ease, color 0.3s ease;

		border: unset;
		border-radius: 4px;

		margin-top: unset;

		padding: 0.2rem;
		opacity: 0.5;

		cursor: pointer;

		&:hover {
			color: var(--slsg-graph-action-color-hover);
			background-color: var(--slsg-graph-action-bg-color-hover);
		}

		svg {
			width: 16px;
			height: 16px;
		}
	}

	/* ========================================================================================================== */
	/* ======================================== Backlink Styling ================================================ */
	.slsg-backlinks {
		padding: 0;
		list-style: none;

		a.slsg-backlink {
			display: block;
			font-size: var(--slsg-text-xs);
			text-decoration: none;
			color: var(--slsg-text-color-accent);
			overflow-wrap: anywhere;

			&:hover {
				color: var(--slsg-text-color);
				text-decoration: underline;
			}

			--pad-inline: 0.5rem;
			border-radius: 0.25rem;
			padding-block: 0.25rem;
			padding-inline: calc(1rem * var(--depth) + var(--pad-inline)) var(--pad-inline);
			line-height: 1.25;
		}
	}

	/* ========================================================================================================== */
	/* ====================================== Context Menu Styles =============================================== */
	.slsg-menu-container {
		position: fixed;
		z-index: 1000;
	}

	.slsg-menu {
		display: inline-flex;
		background-color: var(--slsg-context-menu-bg-color);
		border: 1px var(--slsg-context-menu-border-color) solid;
		border-radius: 10px;
		overflow: hidden;
		flex-direction: column;
		padding: 6px;
	}

	.slsg-menu-item {
		display: flex;
		align-items: center;
		gap: 8px;
		padding: 2px 4px;
		margin: 0 2px;
		border-radius: 4px;
		white-space: nowrap;
	}

	.slsg-menu-item:hover {
		background-color: var(--slsg-context-menu-bg-color-hover);
	}

	.slsg-menu-item-icon {
		display: flex;
	}

	.slsg-menu-item-icon svg {
		width: 20px;
		height: 20px;
	}

	.slsg-menu-item-title {
		font-weight: 600;
		font-size: var(--slsg-text-xs);
	}

	/* ========================================================================================================== */
	/* ======================================== Popup Menu Styling ============================================== */
	.slsg-popup-menu {
		position: fixed;
		z-index: 1000;
		right: 8px;
		top: 8px;

		background-color: color-mix(in srgb, var(--slsg-graph-bg-color) 90%, transparent);
		border: 1px solid var(--slsg-context-menu-border-color);
		border-radius: 8px;
		padding: 8px;

		overflow: hidden;

		backdrop-filter: blur(32px);

		.slsg-value-slider {
			display: flex;
			font-size: var(--slsg-text-xs);
			flex-wrap: wrap;

			.slsg-value-slider-text {
				display: flex;
				gap: 0.5rem;
			}

			.slsg-value-slider-label {
				font-weight: 900;
			}
		}
	}
}
